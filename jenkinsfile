pipeline {
    agent any 
    stages {
        stage('Stage 1') {
            steps {
                echo 'Hello world!' 
                ls -ltr
                curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
                sh "add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs)   stable""
                sh "apt-get update"
                sh "apt-cache policy docker-ce"
                sh "apt-get install -y docker-ce"
                sh "docker -v"
                sh "docker build -t testdocker -f Dockerfile"
            }
        }
/*        stage('Building image') {
            steps {
                script {
                    docker.build registry + ":$BUILD_NUMBER"
                }
            }
        } */
    }
}
